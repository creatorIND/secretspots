<% layout("./common/boilerplate") %>
<main class="spots">
	<section class="spots__header">
		<div class="spots__map" id="clusterMap"></div>
		<div class="heading-primary">All Spots</div>
		<form class="form" method="get" action="">
			<div class="form__group">
				<label class="form__label" for="country"
					>Filter by Location:</label
				>
				<input
					class="form__input"
					type="text"
					placeholder="Enter Location" />
			</div>
			<div class="form__group">
				<button class="btn">Go</button>
			</div>
		</form>
	</section>
	<section class="spots__list">
		<% for(let spot of spots) { %>
		<a
			style="
				background: linear-gradient(
						180deg,
						rgba(0, 0, 0, 0.04) 0%,
						rgba(0, 0, 0, 0.4) 100%
					),
					url('https://images.unsplash.com/photo-1717951832739-a220911fed47?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')
						lightgray 50% / cover no-repeat;
			"
			class="spots__item"
			href="/spots/<%= spot._id %>">
			<div class="spots__info">
				<div>
					<div class="spots__name"><%= spot.title %></div>
					<div class="spots__place"><%= spot.location %></div>
				</div>
				<div>
					<img
						class="spots__arrow-icon"
						src="/assets/icons/arrow-forward.svg"
						alt="" />
				</div>
			</div>
		</a>
		<% } %>
	</section>
</main>

<!-- <% for(let spot of spots) { %>
<div class="">
	<div class="">
		<div class="">
			<% if(spot.images.length > 0) { %>
			<img class="" src="<%= spot.images[0].url %>" alt="" />
			<% } %>
		</div>
		<div class="">
			<div class="">
				<h5 class=""><%= spot.title %></h5>
				<p class=""><%= spot.description %></p>
				<p class="">
					<small class="text-secondary"><%= spot.location %> </small>
				</p>
				<a class="" href="/spots/<%= spot._id %>"> View </a>
			</div>
		</div>
	</div>
</div>
<% } %> -->

<script>
	const mapToken = "<%- process.env.MAPBOX_TOKEN %>";
	const spots = {features: <%- JSON.stringify(spots) %>}
</script>

<script src="/js/clusterMap.js"></script>
